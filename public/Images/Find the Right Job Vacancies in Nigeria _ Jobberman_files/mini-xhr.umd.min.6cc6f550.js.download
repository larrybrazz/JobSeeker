/*!
 * @cycjimmy/mini-xhr v7.0.0
 * Homepage: https://github.com/cycjimmy/mini-xhr#readme
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).miniXhr={})}(this,(function(e){"use strict";var t=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";return t(e,(function(e,t){var o="";n&&(o="&"),n+="".concat(o+t,"=").concat(e)})),n},o=function(){return"undefined"==typeof window?global:window},i=function(e){var o=e.method,i=void 0===o?"GET":o,r=e.url,s=e.timeout,a=void 0===s?0:s,u=e.ontimeoutCB,c=void 0===u?null:u,d=e.params,p=void 0===d?{}:d,f=e.dataType,l=void 0===f?"json":f,v=e.data,m=e.responseType,y=void 0===m?"json":m,h=e.contentType,T=void 0===h?"application/json; charset=UTF-8":h,j=e.headers,g=void 0===j?{}:j,b=e.success,w=void 0===b?function(){}:b,P=e.fail,C=void 0===P?function(){}:P,x=new XMLHttpRequest,q=n(p);switch(x.open(i,q?"".concat(r,"?").concat(n(p)):r,!0),x.onreadystatechange=function(){if(4===x.readyState)if(x.status>=200&&x.status<400)w(x.response);else{var e=x.statusText,t=x.status;C({statusText:t?e:"timeout",status:t})}},x.timeout=a,c&&(x.ontimeout=c),x.responseType=y,T&&x.setRequestHeader("Content-Type",T),t(g,(function(e,t){x.setRequestHeader(t,e)})),l){case"json":x.setRequestHeader("Accept","application/json"),x.send(JSON.stringify(v));break;case"text":case"formData":x.setRequestHeader("Accept","*/*"),x.send(v);break;default:x.send(v)}return x},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params,o=void 0===n?{}:n,r=t.headers,s=void 0===r?{}:r,a=t.contentType,u=t.responseType,c=void 0===u?"json":u,d=t.timeout,p=void 0===d?0:d,f=t.ontimeoutCB,l=void 0===f?null:f;return Promise.resolve().then((function(){return new Promise((function(t,n){i({method:"GET",url:e,params:o,contentType:a,headers:s,responseType:c,timeout:p,ontimeoutCB:l,success:function(e){return t(e)},fail:function(e){return n(e)}})}))}))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params,o=void 0===n?{}:n,r=t.data,s=void 0===r?{}:r,a=t.dataType,u=void 0===a?"json":a,c=t.headers,d=void 0===c?{}:c,p=t.contentType,f=t.responseType,l=void 0===f?"json":f,v=t.timeout,m=void 0===v?0:v,y=t.ontimeoutCB,h=void 0===y?null:y;return Promise.resolve().then((function(){return new Promise((function(t,n){i({method:"POST",url:e,params:o,data:s,dataType:u,headers:d,contentType:p,responseType:l,timeout:m,ontimeoutCB:h,success:function(e){return t(e)},fail:function(e){return n(e)}})}))}))},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.params,r=void 0===i?{}:i,s=t.timeout,a=void 0===s?5e3:s,u=o(),c="error",d="timeout";return Promise.resolve().then((function(){return new Promise((function(t,o){var i=document.querySelector("head"),s=document.createElement("script"),p=n(r);s.src=e,s.type="text/javascript";var f="jsonp_".concat(Math.random()).replace(".","");function l(){i.removeChild(s),clearTimeout(s.timer),u[f]=null}u[f]=function(e){l(),t(e)},s.src+=p?"?".concat(p,"&callback=").concat(f):"?callback=".concat(f),s.timer=setTimeout((function(){l(),o(d)}),a),s.addEventListener("error",(function(){l(),o(c)})),i.appendChild(s)}))}))},u={get:r,post:s,jsonp:a};e.default=u,e.get=r,e.jsonp=a,e.post=s,Object.defineProperty(e,"__esModule",{value:!0})}));
